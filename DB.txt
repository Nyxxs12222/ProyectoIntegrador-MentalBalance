
-----//Recuerden cambiar los valores de config por los de su mysql

CREATE DATABASE MentalBalance;
USE MentalBalance;

CREATE TABLE usuarios (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(50) NOT NULL,
    apellido VARCHAR(50) NOT NULL,
    email VARCHAR(120) UNIQUE NOT NULL,
    password VARCHAR(255) NULL,
    google_id VARCHAR(255) UNIQUE,
    creado_en TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE especialistas (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(50) NOT NULL,
    apellido VARCHAR(50) NOT NULL,
    email VARCHAR(120) UNIQUE NOT NULL,
    genero ENUM('masculino', 'femenino', 'otro', 'prefiero_no_decir') NOT NULL,
    licencia VARCHAR(50) UNIQUE NOT NULL,
    especialidad ENUM(
        'Psicología clínica',
        'Psiquiatría',
        'Terapia cognitivo-conductual',
        'Psicoanálisis',
        'Terapia familiar',
        'Terapia de pareja',
        'Neuropsicología',
        'Psicología infantil',
        'Psicología educativa',
        'Psicología organizacional',
        'Otra'
    ) NOT NULL,
    años_experiencia ENUM('1-3', '4-6', '7-10', '10+') NOT NULL,
    password VARCHAR(255) NOT NULL,
    verificado BOOLEAN DEFAULT TRUE,
    creado_en TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    modelo_terapeutico ENUM(
		'Cognitivo-Conductual',
		'Psicoanalítico',
		'Humanista',
		'Sistémico',
		'Gestalt',
		'Integrativo',
		'Otro'
	) NOT NULL DEFAULT 'Cognitivo-Conductual',
	precio DECIMAL(8,2) NOT NULL DEFAULT 500.00
);

CREATE TABLE CitasDisponibles (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_especialista INT NOT NULL,
    fecha DATE NOT NULL,
    hora TIME NOT NULL,
    disponible BOOLEAN DEFAULT TRUE,
    FOREIGN KEY (id_especialista) REFERENCES especialistas(id) ON DELETE CASCADE
);

CREATE TABLE CitasAgendadas (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_usuario INT NOT NULL,
    id_especialista INT NOT NULL,
    fecha DATE NOT NULL,
    hora TIME NOT NULL,
    estado ENUM('pendiente', 'confirmada', 'completada', 'cancelada') DEFAULT 'pendiente',
    creado_en TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id) ON DELETE CASCADE,
    FOREIGN KEY (id_especialista) REFERENCES especialistas(id) ON DELETE CASCADE
);


SELECT * FROM CitasAgendadas;

